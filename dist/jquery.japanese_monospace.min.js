/*! jQuery JapaneseMonospace Plugin v1.0.0 | Copyright 2014 criticalbreak5's | opensource.org/licenses/mit-license.php */
(function(a){a.fn.japanese_monospace=function(b){function l(d){var c=a(d).clone(!1);c.attr("id",b["preview-control-id"]);a(c).empty();a(c).hide();a(c).css({position:"relative"});b["preview-control-override-width"]&&c.css({width:b["preview-control-override-width"]});b["preview-control-override-height"]&&c.css({height:b["preview-control-override-height"]});a(c).css({top:b["preview-control-relative-top"]});a(c).css({left:b["preview-control-relative-left"]});a(d).after(c);a(d).focus(function(){m(d,c)});
a(d).blur(function(){a(d).css({"background-color":b["blur-background-color"]});clearInterval(e);k=e=null;a(c).fadeOut()})}function m(d,c){a(d).css({"background-color":b["focus-background-color"]});a(c).fadeIn();e=setInterval(function(){k!=a(d).val()&&a(c).val(n(Number(b["preview-control-line-length"]),a(d).val()));k=a(d).val()},Number(b.delay))}function n(a,c){for(var b=[],g=0,e=0;e<c.length;e++){var h=c.charAt(e);if("\r"!=h)if("\n"==h)b.push("\n"),g=0;else{var f=h.charCodeAt();tmpLength=0<=f&&129>
f||63728==f||65377<=f&&65440>f||63729<=f&&63732>f?1:2;a<g+tmpLength&&(b.push("\n"),g=0);b.push(h);g+=tmpLength}}return b.join("")}var e=null,k=null;b=a.extend({"preview-control-id":"preview_control_id","preview-control-relative-top":"0px","preview-control-relative-left":"0px","preview-control-line-length":"100","focus-background-color":"#FFFFFF","blur-background-color":"#FFFFFF",delay:"1000"},b);return this.each(function(){l(this)})}})(jQuery);
